<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rakuten API Example</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div>
        <label for="color-select">色：</label>
        <select id="color-select">
            <option value="white">ホワイト</option>
            <option value="black">ブラック</option>
            <option value="gray">グレー</option>
            <option value="brown">ブラウン</option>
            <option value="beige">ベージュ</option>
            <option value="khaki">カーキグリーン</option>
            <option value="pink">ピンク</option>
            <option value="red">レッド</option>
            <option value="orange">オレンジ</option>
            <option value="yellow">イエロー</option>
            <option value="green">グリーン</option>
            <option value="blue">ブルー</option>
            <option value="navy">ネイビー</option>
            <option value="purple">パープル</option>
            <option value="gold">ゴールド</option>
            <option value="silver">シルバー</option>
            <option value="transparent">透明</option>
            <option value="multicolor">マルチカラー</option>
        </select>
        <!-- 楽天API発動ボタン -->
        <button type="button" class="get-information">楽天API発動！</button>
    </div>

    <div class="display-information-wrapper">
        <ul></ul>
    </div>

    <script>
        $(function(){
            let getInformationButton = $('button.get-information');
            let appId = '1000646968939020152';
            let reqUrl = 'https://app.rakuten.co.jp/services/api/IchibaItem/Search/20170706';
            let displayInformationWrapper = $('.display-information-wrapper');

            getInformationButton.click(() => {
                let color = $('#color-select').val(); // 選択された色
                let tagId;

                // 色に応じてtagIdを設定
                switch (color) {
                    case 'white':
                        tagId = '1000873';
                        break;
                    case 'black':
                        tagId = '1000886';
                        break;
                    case 'gray':
                        tagId = '1000881';
                        break;
                    case 'brown':
                        tagId = '1000883';
                        break;
                    case 'beige':
                        tagId = '1000878';
                        break;
                    case 'khaki':
                        tagId = '1004016';
                        break;
                    case 'pink':
                        tagId = '1000876';
                        break;
                    case 'red':
                        tagId = '1000877';
                        break;
                    case 'orange':
                        tagId = '1000875';
                        break;
                    case 'yellow':
                        tagId = '1000874';
                        break;
                    case 'green':
                        tagId = '1000884';
                        break;
                    case 'blue':
                        tagId = '1000885';
                        break;
                    case 'navy':
                        tagId = '1004015';
                        break;
                    case 'purple':
                        tagId = '1000882';
                        break;
                    case 'gold':
                        tagId = '1000880';
                        break;
                    case 'silver':
                        tagId = '1000879';
                        break;
                    case 'transparent':
                        tagId = '1016062';
                        break;
                    case 'multicolor':
                        tagId = '1000887';
                        break;
                    default:
                        tagId = '1000886'; // デフォルトは黒
                }

                $.ajax({
                    url: reqUrl,
                    type: 'GET',
                    data: {
                        'applicationId': appId,
                        'formatVersion': 2,
                        'hits': 5,
                        'genreId': 565171,
                        'tagId': tagId // 色に応じたtagidを送信
                    }
                })
                .done((data) => {
                    let items = data.Items;
                    let itemListHtml = '';

                    console.log(data);

                    for (let i in items) {
                        let item = items[i];

                        itemListHtml += `<li class="item">
                                            <figure class="item-image">
                                                <img src="${item['mediumImageUrls'][0]}" />
                                            </figure>
                                            <div class="item-name">${item['itemName']}</div>
                                            <div class="item-price">￥${item['itemPrice']}</div>
                                        </li>`;
                    }

                    displayInformationWrapper.find('ul').empty().append(itemListHtml);
                })
                .fail(() => {
                    console.log('err');
                })
            });
        });
    </script>
</body>
</html>
